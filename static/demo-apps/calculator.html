<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calcolatrice MyApp</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-blue-50 to-purple-50 min-h-screen flex items-center justify-center p-4">
    <div class="max-w-md w-full">
        <!-- Card Calcolatrice -->
        <div class="bg-white rounded-2xl shadow-2xl overflow-hidden">
            <!-- Header -->
            <div class="bg-gradient-to-r from-blue-600 to-purple-600 p-6 text-white">
                <h1 class="text-2xl font-bold mb-1">üßÆ Calcolatrice</h1>
                <p class="text-sm text-white/80">Demo App per MyApp Hub</p>
            </div>
            
            <!-- Display -->
            <div class="p-6 bg-gray-50">
                <input type="text" 
                       id="display" 
                       class="w-full text-right text-3xl font-bold bg-white border-2 border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:border-blue-500" 
                       value="0" 
                       readonly>
            </div>
            
            <!-- Buttons -->
            <div class="p-6 grid grid-cols-4 gap-3">
                <!-- Row 1 -->
                <button onclick="clearDisplay()" class="col-span-2 btn-operator">C</button>
                <button onclick="deleteLast()" class="btn-operator">‚Üê</button>
                <button onclick="appendOperator('/')" class="btn-operator">√∑</button>
                
                <!-- Row 2 -->
                <button onclick="appendNumber('7')" class="btn-number">7</button>
                <button onclick="appendNumber('8')" class="btn-number">8</button>
                <button onclick="appendNumber('9')" class="btn-number">9</button>
                <button onclick="appendOperator('*')" class="btn-operator">√ó</button>
                
                <!-- Row 3 -->
                <button onclick="appendNumber('4')" class="btn-number">4</button>
                <button onclick="appendNumber('5')" class="btn-number">5</button>
                <button onclick="appendNumber('6')" class="btn-number">6</button>
                <button onclick="appendOperator('-')" class="btn-operator">‚àí</button>
                
                <!-- Row 4 -->
                <button onclick="appendNumber('1')" class="btn-number">1</button>
                <button onclick="appendNumber('2')" class="btn-number">2</button>
                <button onclick="appendNumber('3')" class="btn-number">3</button>
                <button onclick="appendOperator('+')" class="btn-operator">+</button>
                
                <!-- Row 5 -->
                <button onclick="appendNumber('0')" class="col-span-2 btn-number">0</button>
                <button onclick="appendNumber('.')" class="btn-number">.</button>
                <button onclick="calculate()" class="btn-equals">=</button>
            </div>
            
            <!-- Footer -->
            <div class="p-4 bg-gray-50 border-t text-center text-xs text-gray-500">
                Powered by MyApp ‚Ä¢ Demo App JavaScript
            </div>
        </div>
    </div>

    <style>
        .btn-number {
            @apply bg-white hover:bg-gray-50 text-gray-800 font-semibold py-4 rounded-lg shadow border border-gray-200 transition-all hover:shadow-md active:scale-95;
        }
        .btn-operator {
            @apply bg-blue-500 hover:bg-blue-600 text-white font-semibold py-4 rounded-lg shadow transition-all hover:shadow-md active:scale-95;
        }
        .btn-equals {
            @apply bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-bold py-4 rounded-lg shadow-lg transition-all hover:shadow-xl active:scale-95;
        }
    </style>

    <script>
        let display = document.getElementById('display');
        let currentValue = '0';
        let operator = null;
        let previousValue = null;
        let waitingForOperand = false;

        function updateDisplay() {
            display.value = currentValue;
        }

        function clearDisplay() {
            currentValue = '0';
            operator = null;
            previousValue = null;
            waitingForOperand = false;
            updateDisplay();
        }

        function deleteLast() {
            if (currentValue.length > 1) {
                currentValue = currentValue.slice(0, -1);
            } else {
                currentValue = '0';
            }
            updateDisplay();
        }

        function appendNumber(num) {
            if (waitingForOperand) {
                currentValue = num;
                waitingForOperand = false;
            } else {
                currentValue = currentValue === '0' ? num : currentValue + num;
            }
            updateDisplay();
        }

        function appendOperator(op) {
            if (operator !== null && !waitingForOperand) {
                calculate();
            }
            previousValue = parseFloat(currentValue);
            operator = op;
            waitingForOperand = true;
        }

        function calculate() {
            if (operator === null || previousValue === null) return;
            
            let current = parseFloat(currentValue);
            let result;
            
            switch(operator) {
                case '+':
                    result = previousValue + current;
                    break;
                case '-':
                    result = previousValue - current;
                    break;
                case '*':
                    result = previousValue * current;
                    break;
                case '/':
                    result = current !== 0 ? previousValue / current : 'Error';
                    break;
                default:
                    return;
            }
            
            currentValue = result.toString();
            operator = null;
            previousValue = null;
            waitingForOperand = true;
            updateDisplay();
        }

        // Supporto tastiera
        document.addEventListener('keydown', (e) => {
            if (e.key >= '0' && e.key <= '9') appendNumber(e.key);
            if (e.key === '.') appendNumber('.');
            if (e.key === '+') appendOperator('+');
            if (e.key === '-') appendOperator('-');
            if (e.key === '*') appendOperator('*');
            if (e.key === '/') { e.preventDefault(); appendOperator('/'); }
            if (e.key === 'Enter') { e.preventDefault(); calculate(); }
            if (e.key === 'Escape') clearDisplay();
            if (e.key === 'Backspace') deleteLast();
        });
    </script>
</body>
</html>
