{% extends 'core/base.html' %}

{% block title %}Profilo â€” MyApp{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto">
    <h1 class="text-2xl font-bold text-gray-800 mb-6">Profilo</h1>

    <!-- Card: info utente -->
    <div class="bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden mb-6">
        <div class="bg-blue-50 border-b border-blue-100 p-5 flex items-center gap-4">
            <!-- Avatar iniziali -->
            <div class="h-14 w-14 rounded-full bg-blue-600 flex items-center justify-center text-white text-xl font-bold flex-shrink-0">
                {{ user.username|first|upper }}
            </div>
            <div>
                <h2 class="text-lg font-semibold text-gray-800">{{ user.get_full_name|default:user.username }}</h2>
                <span class="inline-block mt-0.5 px-2.5 py-0.5 rounded-full text-xs font-medium
                    {% if profile.is_admin %}bg-red-100 text-red-700
                    {% elif profile.is_editor %}bg-blue-100 text-blue-700
                    {% else %}bg-gray-100 text-gray-600{% endif %}">
                    {{ profile.get_role_display }}
                </span>
            </div>
        </div>
        <div class="p-5 grid grid-cols-1 sm:grid-cols-2 gap-4">
            <div>
                <p class="text-xs text-gray-400 uppercase tracking-wide">Username</p>
                <p class="text-sm text-gray-700 mt-0.5">{{ user.username }}</p>
            </div>
            <div>
                <p class="text-xs text-gray-400 uppercase tracking-wide">Email</p>
                <p class="text-sm text-gray-700 mt-0.5">{{ user.email|default:"Non specificata" }}</p>
            </div>
            <div>
                <p class="text-xs text-gray-400 uppercase tracking-wide">Data Iscrizione</p>
                <p class="text-sm text-gray-700 mt-0.5">{{ user.date_joined|date:"d M Y" }}</p>
            </div>
            <div>
                <p class="text-xs text-gray-400 uppercase tracking-wide">Bio</p>
                <p class="text-sm text-gray-700 mt-0.5">{{ profile.bio|default:"Non impostata" }}</p>
            </div>
        </div>
    </div>

    <!-- Card: modifica profilo -->
    <div class="bg-white rounded-xl border border-gray-200 shadow-sm p-6">
        <h3 class="text-base font-semibold text-gray-800 mb-4">Modifica Profilo</h3>
        <form method="post" class="space-y-4">
            {% csrf_token %}
            {% for field in form %}
            <div>
                <label for="{{ field.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-1">{{ field.label }}</label>
                {{ field }}
                {% for error in field.errors %}
                <p class="mt-1 text-xs text-red-600">{{ error }}</p>
                {% endfor %}
            </div>
            {% endfor %}
            <div class="flex gap-3 pt-2">
                <button type="submit" class="px-5 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors">
                    Salva
                </button>
                <a href="{% url 'core:profile' %}" class="px-5 py-2 border border-gray-300 text-gray-600 rounded-lg text-sm font-medium hover:bg-gray-50 transition-colors">
                    Annulla
                </a>
            </div>
        </form>
    </div>
</div>
{% endblock %}
